# アーキテクチャ決定プロセス

## 目的

このドキュメントは、本プロジェクトにおけるアーキテクチャ決定のプロセスを定義し、一貫性のある技術的意思決定を行うためのガイドラインを提供します。

## ADR作成が必要なケース

**必須**: 型システム変更、データフロー変更、アーキテクチャ変更、5ファイル以上の変更、外部依存追加
**推奨**: パフォーマンス、セキュリティ、拡張性に関わる決定

## ADR作成プロセス

1. **問題分析**: 課題と影響範囲の特定
2. **選択肢検討**: 複数案の比較とトレードオフ分析
3. **ADR作成**: `ADR-[4桁番号]-[タイトル].md`形式で文書化
4. **レビューと承認**: AIがドラフト作成 → ユーザー承認で"Accepted"
5. **実装**: ADRに従って実装開始

**実装時の注意事項**：
- ADRの実装ガイドラインに従う
- 大きな逸脱がある場合はADRを更新
- 実装中に発見した問題は記録

### 6. 振り返りと更新

**実施内容**：
- 実装後の結果を評価
- 想定外の影響があれば記録
- 必要に応じてADRを更新

## ADRステータス

**Proposed** → **Accepted** → **Deprecated/Superseded**

## ADRとDesign Docの使い分け

**ADR**: なぜ（Why）- 決定理由とトレードオフ
**Design Doc**: どのように（How）- 実装詳細とテスト戦略

## AI利用時のルール

- 5ファイル以上の変更時はADR作成を提案
- 既存ADRを必ず確認してから実装
- 緊急時（本番障害、セキュリティ脆弱性）は事後ADR作成可