---
description: プロジェクト固有のコンテキストをproject-contextスキルに注入
---

**コマンドコンテキスト**: AIの実行精度を高めるプロジェクト固有の前提情報を収集し、project-context SKILL.mdを更新する。

## なぜ必要か

CLAUDE.mdのセッション初期化で`project-context`スキルが毎セッション読み込まれる。ここで収集した情報が、全タスクにおけるAIの判断精度に直接影響する。

**AIの実行精度に寄与する情報のみ収集する。**

## 実行プロセス

以下のステップをTodoWriteに登録し、順番に進行する。

### Step 1: 現状把握

現在のproject-contextスキルとpackage.jsonを読む：
- `.claude/skills/project-context/SKILL.md`
- `package.json`（name、description）

project-contextが設定済み（「未設定」マーカーがない）の場合、上書きか更新かをユーザーに確認する。

### Step 2: プロジェクトコンテキストの収集

AskUserQuestionで段階的に収集する。

**ラウンド1: プロジェクトの本質**
- このプロジェクトは何をするものか？（1-2文）
- どのドメインに属するか？（例：金融、ヘルスケア、開発者ツール、EC）

**ラウンド2: ドメイン制約**（ラウンド1の回答に基づいて質問）
- AIが必ず守るべきドメイン固有のルールはあるか？ラウンド1のドメインに応じた例を提示する（例：金融なら「全ての変更操作に監査ログ必須」、ヘルスケアなら「ログ出力は匿名化された患者IDを使用」）。
- 最大3つ。AIが無視するとバグやコンプライアンス違反になるもののみ。

**ラウンド3: 開発コンテキスト**
- 開発フェーズ：プロトタイプ / 本番開発 / 運用中
- AIが従うべきディレクトリ規約やファイル配置ルールはあるか？（なければスキップ）

### Step 3: 生成と書き込み

収集した情報からproject-context SKILL.mdを生成する。以下の原則に従う：

**記述の原則：**
1. AI判断可能：測定・検証可能な基準のみ（「迅速に」→「5秒以内」）
2. 曖昧さの排除：具体的な数値・条件・例示を含める
3. 肯定形：「〜しない」より「〜する」の形で記述
4. 最小限：AIの実行精度に影響するもののみ

**出力先**（両方更新する）：
1. `.claude/skills/project-context/SKILL.md`（アクティブ、Claudeが読む方）
2. 対応する`skills-{lang}/project-context/SKILL.md`（`.claudelang`で現在の言語を確認）

**構造：**
```markdown
---
name: project-context
description: AIの実行精度に必要なプロジェクト固有の前提情報を提供。プロジェクト構成確認時に使用。
---

# プロジェクトコンテキスト

## プロジェクト概要
- **このプロジェクトが何をするか**: [簡潔な説明]
- **ドメイン**: [ドメイン]

## ドメイン制約
1. [AIの判断に影響する測定可能な制約]
2. [検証可能な要件]

## 開発フェーズ
- **フェーズ**: [現在のフェーズ]

## ディレクトリ規約
[ファイル配置ルール、またはなければ「特になし」]
```

### Step 4: 検証

- [ ] 生成ファイルにプレースホルダーテキスト（「要設定」等）が残っていないこと
- [ ] 全てのドメイン制約が測定・検証可能であること（曖昧な記述がない）
- [ ] 技術スタック情報が含まれていないこと（technical-specスキルの責務）
- [ ] 実装原則が含まれていないこと（coding-standardsスキルの責務）
- [ ] 両方の出力先が更新されていること
- [ ] 結果をユーザーに提示して確認を得ること
